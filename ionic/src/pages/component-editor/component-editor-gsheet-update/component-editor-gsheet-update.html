<component-editor [outputBlock]="outputBlock" [validated]="isValid()">
  <div [hidden]="outputBlock.type != 'google_sheets'">

    <ion-item text-wrap>
      <label for="_googleSheetsUrl">Google Sheets URL</label>
      <input id="_googleSheetsUrl" [(ngModel)]="outputBlock.googleSheetsUrl" class="inline-input" type="url" placeholder="Example: https://docs.google.com/spreadsheets/d/4281a3386e77d42a9089da5769fb7b22" />
    </ion-item>

    <ion-item text-wrap>
      <label for="_googleSheetsAction">Action</label>
      <select id="_googleSheetsAction" [(ngModel)]="outputBlock.googleSheetsAction" class="action-select">
        <option value="append">Append or Update Row</option>
        <option value="get">Get Row</option>
        <option value="delete">Delete Row</option>
      </select>
      <br>
      <p>
        Choose the action to perform on the Google Sheet.
      </p>
    </ion-item>

    <ion-item text-wrap>
      <label for="_keyColumn">Key column</label>
      <div style="position: relative; width: 100%;">
        <ion-icon name="key" style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #999;"></ion-icon>
        <input id="_keyColumn" value="barcode" class="inline-input" type="text" disabled style="padding-left: 35px;" />
      </div>
      <br>
      <p>
        The column that will be used to search for rows. This cannot be changed.
      </p>
    </ion-item>

    <!-- Columns Section for Append Action -->
    <div *ngIf="outputBlock.googleSheetsAction === 'append'">

      <ion-item text-wrap no-lines>
        <ion-label>
          <h2>Columns</h2>
        </ion-label>
      </ion-item>
      <div class="component-editor-card ">
        <ion-item text-wrap no-lines style="background: transparent;">
          <p>
            Configure which columns will be sent to your Google Sheet. You can use variable injection.
          </p>
        </ion-item>
        <ion-item no-lines style="background: transparent; color: #595959">
          <ion-label>Send all the available variables as columns</ion-label>
          <ion-checkbox [(ngModel)]="outputBlock.googleSheetsSendAllVariables" (ionChange)="onSendAllVariablesChange()" style="margin-right: 9px; margin-top: 7px"></ion-checkbox>
        </ion-item>

        <!-- Column Values List -->
        <ion-grid class="values-grid">
          <ion-item no-lines *ngFor="let value of outputBlock.googleSheetsValues; let i = index" style="background: transparent; padding-left: 11px;">
            <ion-row no-padding>
              <ion-col col-11>
                <input [(ngModel)]="outputBlock.googleSheetsValues[i].value" class="inline-input" type="text" placeholder="e.g., &#123;&#123; number &#125;&#125;" [disabled]="outputBlock.googleSheetsSendAllVariables" />
              </ion-col>
              <ion-col col-1>
                <button ion-button small center clear icon-only color="danger" (click)="removeValue(i)" [disabled]="outputBlock.googleSheetsSendAllVariables || outputBlock.googleSheetsValues.length === 1">
                  <ion-icon name="trash"></ion-icon>
                </button>
              </ion-col>
            </ion-row>
          </ion-item>
        </ion-grid>

        <ion-item no-lines>
          <div style="padding: 0; margin: 0">
            <button ion-button small icon-start (click)="addValue()" [disabled]="outputBlock.googleSheetsSendAllVariables">
              <ion-icon name="add"></ion-icon>
              Add Column
            </button>
          </div>
        </ion-item>
      </div>



      <ion-item text-wrap no-lines>
        <ion-label>
          <h3>Available Variables</h3>
        </ion-label>
      </ion-item>

      <ion-item text-wrap no-lines>
        <variables-list></variables-list>
      </ion-item>



      <!-- Info for Get/Delete Actions -->
      <ion-item text-wrap *ngIf="outputBlock.googleSheetsAction === 'get' || outputBlock.googleSheetsAction === 'delete'">
        <p>
          The {{ outputBlock.googleSheetsAction === 'get' ? 'Get Row' : 'Delete Row' }} action will search for the row using the barcode value in the key column.
        </p>
      </ion-item>

    </div>

  </div>
</component-editor>
